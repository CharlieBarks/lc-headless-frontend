module.exports=[57019,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(87532),f=a.i(5784);let g=(0,a.i(70106).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function h({categories:a,type:h}){let i=(0,d.useRouter)(),j=(0,d.useSearchParams)(),[k,l]=(0,c.useState)(j.get("search")||""),[m,n]=(0,c.useState)(!1),o=j.get("category")||"";return(0,b.jsxs)("div",{className:"mb-12 space-y-6",children:[(0,b.jsxs)("div",{className:"relative max-w-2xl",children:[(0,b.jsx)(e.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,b.jsx)("input",{type:"text",value:k,onChange:a=>{var b;let c;return l(b=a.target.value),c=new URLSearchParams(j.toString()),void(b?c.set("search",b):c.delete("search"),i.push(`/${h}?${c.toString()}`))},placeholder:"Search listings...",className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 transition-all"})]}),a.length>0&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("button",{onClick:()=>n(!m),className:"flex items-center gap-2 text-slate-700 font-medium hover:text-emerald-600 transition-colors mb-4",children:[(0,b.jsx)("span",{children:"Filter by Category"}),m?(0,b.jsx)(g,{className:"w-5 h-5"}):(0,b.jsx)(f.ChevronDown,{className:"w-5 h-5"})]}),m&&(0,b.jsx)("div",{className:"flex flex-wrap gap-3 animate-in fade-in slide-in-from-top-2 duration-200",children:a.map(a=>(0,b.jsx)("button",{onClick:()=>{var b;let c;return b=a.id.toString(),c=new URLSearchParams(j.toString()),void(o===b.toString()?c.delete("category"):c.set("category",b.toString()),i.push(`/${h}?${c.toString()}`))},className:`px-4 py-2 rounded-lg font-medium transition-all ${o===a.id.toString()?"bg-emerald-600 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-700 hover:border-emerald-500 hover:text-emerald-600"}`,children:a.name},a.id))})]}),(k||o)&&(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsx)("span",{className:"text-slate-600",children:"Active filters:"}),k&&(0,b.jsxs)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium",children:["Search: ",k]}),o&&(0,b.jsx)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium",children:a.find(a=>a.id.toString()===o)?.name}),(0,b.jsx)("button",{onClick:()=>{l(""),i.push(`/${h}`)},className:"text-sm text-slate-600 hover:text-emerald-600 underline",children:"Clear all"})]})]})}a.s(["ArchiveFilters",()=>h],57019)},77705,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(71987),f=a.i(70106);let g=(0,f.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),h=(0,f.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function i(a){let b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'","&#8217;":"'","&#8216;":"'","&#8220;":'"',"&#8221;":'"',"&#038;":"&","&nbsp;":" ","&#160;":" ","&hellip;":"…","&#8230;":"…","&ndash;":"–","&#8211;":"–","&mdash;":"—","&#8212;":"—"};return a.replace(/&[#a-z0-9]+;/gi,a=>b[a]||a)}let j={restaurant:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg?auto=compress&cs=tinysrgb&w=800",business:"https://images.pexels.com/photos/380768/pexels-photo-380768.jpeg?auto=compress&cs=tinysrgb&w=800",accommodation:"https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg?auto=compress&cs=tinysrgb&w=800",places:"https://images.pexels.com/photos/2739664/pexels-photo-2739664.jpeg?auto=compress&cs=tinysrgb&w=800",blog:"https://images.pexels.com/photos/261763/pexels-photo-261763.jpeg?auto=compress&cs=tinysrgb&w=800"},k="https://dir.lascrucesdirectory.com/wp-json/geodir/v2",l="https://dir.lascrucesdirectory.com/wp-json/wp/v2";async function m(a,b={}){return fetch(a,b)}let n={async getRestaurants(a=3,b,c){try{let d=`${k}/restaurant?per_page=${a}&_embed`;b&&(d+=`&gd_restaurantcategory=${b}`),c&&(d+=`&search=${encodeURIComponent(c)}`);let e=await m(d,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch restaurants");return await e.json()}catch(a){return console.error("Error fetching restaurants:",a),[]}},async getRestaurantCategories(){try{let a=await m(`${k}/restaurant/categories?per_page=100`,{next:{revalidate:3600}});if(!a.ok)throw Error("Failed to fetch restaurant categories");return(await a.json()).filter(a=>a.count>0)}catch(a){return console.error("Error fetching restaurant categories:",a),[]}},async getBusinesses(a=3,b,c){try{let d=`${k}/business?per_page=${a}&_embed`;b&&(d+=`&gd_businesscategory=${b}`),c&&(d+=`&search=${encodeURIComponent(c)}`);let e=await m(d,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch businesses");return await e.json()}catch(a){return console.error("Error fetching businesses:",a),[]}},async getBusinessCategories(){try{let a=await m(`${k}/business/categories?per_page=100`,{next:{revalidate:3600}});if(!a.ok)throw Error("Failed to fetch business categories");return(await a.json()).filter(a=>a.count>0)}catch(a){return console.error("Error fetching business categories:",a),[]}},async getAccommodations(a=3,b,c){try{let d=`${k}/accommodation?per_page=${a}&_embed`;b&&(d+=`&gd_accommodationcategory=${b}`),c&&(d+=`&search=${encodeURIComponent(c)}`);let e=await m(d,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch accommodations");return await e.json()}catch(a){return console.error("Error fetching accommodations:",a),[]}},async getAccommodationCategories(){try{let a=await m(`${k}/accommodation/categories?per_page=100`,{next:{revalidate:3600}});if(!a.ok)throw Error("Failed to fetch accommodation categories");return(await a.json()).filter(a=>a.count>0)}catch(a){return console.error("Error fetching accommodation categories:",a),[]}},async getPlaces(a=3,b,c){try{let d=`${k}/places?per_page=${a}&_embed`;b&&(d+=`&gd_placecategory=${b}`),c&&(d+=`&search=${encodeURIComponent(c)}`);let e=await m(d,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch places");return await e.json()}catch(a){return console.error("Error fetching places:",a),[]}},async getPlaceCategories(){try{let a=await m(`${k}/places/categories?per_page=100`,{next:{revalidate:3600}});if(!a.ok)throw Error("Failed to fetch place categories");return(await a.json()).filter(a=>a.count>0)}catch(a){return console.error("Error fetching place categories:",a),[]}},async getFeaturedListings(a=3){try{let[b,c]=await Promise.all([m(`${k}/restaurant?per_page=100&_embed`,{next:{revalidate:3600}}),m(`${k}/business?per_page=100&_embed`,{next:{revalidate:3600}})]),d=await Promise.all([b.ok?b.json():[],c.ok?c.json():[]]);return[...d[0],...d[1]].filter(a=>a.featured_image&&"object"==typeof a.featured_image&&a.featured_image.src).sort(()=>Math.random()-.5).slice(0,a)}catch(a){return console.error("Error fetching featured listings:",a),[]}},async getBlogPosts(a=3){try{let b=await m(`${l}/posts?per_page=${a}&_embed`,{next:{revalidate:3600}});if(!b.ok)throw Error("Failed to fetch blog posts");return await b.json()}catch(a){return console.error("Error fetching blog posts:",a),[]}},async getCategoryCounts(){try{let[a,b,c,d]=await Promise.all([m(`${k}/restaurant?per_page=1`,{next:{revalidate:3600}}),m(`${k}/business?per_page=1`,{next:{revalidate:3600}}),m(`${k}/accommodation?per_page=1`,{next:{revalidate:3600}}),m(`${k}/places?per_page=1`,{next:{revalidate:3600}})]);return{restaurants:parseInt(a.headers.get("X-WP-Total")||"0"),businesses:parseInt(b.headers.get("X-WP-Total")||"0"),accommodations:parseInt(c.headers.get("X-WP-Total")||"0"),places:parseInt(d.headers.get("X-WP-Total")||"0")}}catch(a){return console.error("Error fetching category counts:",a),{restaurants:0,businesses:0,accommodations:0,places:0}}},async searchListings(a,b=10){try{let[c,d,e,f]=await Promise.all([m(`${k}/restaurant?search=${encodeURIComponent(a)}&per_page=${b}`,{next:{revalidate:3600}}),m(`${k}/business?search=${encodeURIComponent(a)}&per_page=${b}`,{next:{revalidate:3600}}),m(`${k}/accommodation?search=${encodeURIComponent(a)}&per_page=${b}`,{next:{revalidate:3600}}),m(`${k}/places?search=${encodeURIComponent(a)}&per_page=${b}`,{next:{revalidate:3600}})]),g=await Promise.all([c.json(),d.json(),e.json(),f.json()]);return[...g[0],...g[1],...g[2],...g[3]].slice(0,b)}catch(a){return console.error("Error searching listings:",a),[]}},async getListingBySlug(a,b){try{let c=await m(`${k}/${a}?slug=${b}&_embed`,{next:{revalidate:3600}});if(!c.ok)throw Error("Failed to fetch listing");let d=await c.json();return d.length>0?d[0]:null}catch(a){return console.error("Error fetching listing:",a),null}},async getListingById(a,b){try{let c=await m(`${k}/${a}/${b}?_embed`,{next:{revalidate:3600}});if(!c.ok)throw Error("Failed to fetch listing");return await c.json()}catch(a){return console.error("Error fetching listing:",a),null}},async getBlogPostById(a){try{let b=await m(`${l}/posts/${a}?_embed`,{next:{revalidate:3600}});if(!b.ok)throw Error("Failed to fetch blog post");return await b.json()}catch(a){return console.error("Error fetching blog post:",a),null}},async getBlogPostBySlug(a){try{let b=await m(`${l}/posts?slug=${a}&_embed`,{next:{revalidate:3600}});if(!b.ok)throw Error("Failed to fetch blog post");let c=await b.json();return c.length>0?c[0]:null}catch(a){return console.error("Error fetching blog post:",a),null}},async getPageById(a){try{let b=await m(`${l}/pages/${a}?_embed`,{next:{revalidate:3600}});if(!b.ok)throw Error("Failed to fetch page");return await b.json()}catch(a){return console.error("Error fetching page:",a),null}},async getPageBySlug(a){try{let b=await m(`${l}/pages?slug=${a}&_embed`,{next:{revalidate:3600}});if(!b.ok)throw Error("Failed to fetch page");let c=await b.json();return c.length>0?c[0]:null}catch(a){return console.error("Error fetching page:",a),null}}};function o({listings:a,type:f,config:k}){let[l,m]=(0,c.useState)(12),n=a.slice(0,l),o=l<a.length;return 0===a.length?(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No listings found"}),(0,b.jsxs)("p",{className:"text-slate-600",children:["Check back soon for new ",k.title.toLowerCase(),"!"]})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(a=>{let c,k=function(a,b="business"){return a.featured_image&&"object"==typeof a.featured_image&&a.featured_image.src?a.featured_image.src:Array.isArray(a.images)&&a.images.length>0&&a.images[0]?.src?a.images[0].src:a._embedded?.["wp:featuredmedia"]?.[0]?.source_url?a._embedded["wp:featuredmedia"][0].source_url:a._embedded?.["wp:featuredmedia"]?.[0]?.media_details?.sizes?.medium?.source_url?a._embedded["wp:featuredmedia"][0].media_details.sizes.medium.source_url:j[b]}(a,f);return(0,b.jsx)("article",{children:(0,b.jsxs)(d.default,{href:`/${f}/${a.slug}`,"aria-label":`View ${i(a.title.rendered)}`,className:"group block bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:[(0,b.jsxs)("div",{className:"relative h-56 overflow-hidden",children:[(0,b.jsx)(e.default,{src:k,alt:i(a.title.rendered),fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw",className:"object-cover group-hover:scale-110 transition-transform duration-500"}),(0,b.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[("boolean"==typeof(c=a.claimed)?c:"object"==typeof c&&c?.raw?"1"===c.raw||"true"===c.raw:"string"==typeof c?"1"===c:"number"==typeof c&&1===c)&&(0,b.jsxs)("div",{className:"px-3 py-1 bg-blue-500/90 backdrop-blur-sm rounded-full text-sm font-semibold text-white flex items-center gap-1.5 shadow-lg",children:[(0,b.jsx)(g,{className:"w-4 h-4","aria-hidden":"true"}),"Claimed"]}),!0===a.featured&&(0,b.jsxs)("div",{className:"px-3 py-1 bg-amber-500/90 backdrop-blur-sm rounded-full text-sm font-semibold text-white flex items-center gap-1.5 shadow-lg",children:[(0,b.jsx)(h,{className:"w-4 h-4 fill-white","aria-hidden":"true"}),"Featured"]})]}),a.rating&&a.rating>0&&(0,b.jsxs)("div",{className:"absolute top-4 right-4 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-sm font-bold text-slate-900",children:["⭐ ",a.rating.toFixed(1)]})]}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-emerald-600 transition-colors",children:i(a.title.rendered)}),a.city&&(0,b.jsxs)("p",{className:"text-slate-600 text-sm mb-2",children:[a.city,", ",a.region]}),a.post_category&&a.post_category.length>0&&(0,b.jsx)("span",{className:"inline-block px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-semibold",children:a.post_category[0].name.replace(/&amp;/g,"&")})]})]})},a.id)})}),o&&(0,b.jsx)("div",{className:"mt-12 text-center",children:(0,b.jsxs)("button",{onClick:()=>{m(b=>Math.min(b+12,a.length))},className:"px-8 py-4 bg-emerald-600 text-white font-semibold rounded-xl hover:bg-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:["Show More (",a.length-l," remaining)"]})})]})}(0,c.cache)(async(a,b)=>n.getListingBySlug(a,b)),(0,c.cache)(async a=>n.getBlogPostBySlug(a)),(0,c.cache)(async()=>{let a=async(a,b=5e3)=>Promise.race([a,new Promise(a=>setTimeout(()=>a(null),b))]),[b,c,d]=await Promise.all([a(n.getFeaturedListings(3)).then(a=>a||[]),a(n.getBlogPosts(3)).then(a=>a||[]),a(n.getCategoryCounts()).then(a=>a||{restaurants:0,businesses:0,accommodations:0,places:0})]);return{featuredListings:b,blogPosts:c,categoryCounts:d}}),(0,c.cache)(async(a,b,c)=>{let d=[],e=[];try{switch(a){case"restaurant":[d,e]=await Promise.all([n.getRestaurants(100,b,c),n.getRestaurantCategories()]);break;case"business":[d,e]=await Promise.all([n.getBusinesses(100,b,c),n.getBusinessCategories()]);break;case"accommodation":[d,e]=await Promise.all([n.getAccommodations(100,b,c),n.getAccommodationCategories()]);break;case"places":[d,e]=await Promise.all([n.getPlaces(100,b,c),n.getPlaceCategories()])}}catch(b){console.error(`Error fetching ${a}:`,b)}return{listings:d,categories:e}}),(0,c.cache)(async(a=50)=>n.getBlogPosts(a)),a.s(["ListingsGrid",()=>o],77705)}];

//# sourceMappingURL=app_components_7560cfbd._.js.map