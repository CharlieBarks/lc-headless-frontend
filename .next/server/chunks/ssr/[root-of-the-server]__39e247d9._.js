module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},70864,a=>{a.n(a.i(33290))},2894,a=>{a.n(a.i(66188))},13718,a=>{a.n(a.i(85523))},18198,a=>{a.n(a.i(45518))},62212,a=>{a.n(a.i(66114))},72030,a=>{"use strict";let b=(0,a.i(1269).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["ChevronRight",()=>b],72030)},21120,a=>{"use strict";var b=a.i(7997),c=a.i(717),d=a.i(95936),e=a.i(3236),f=a.i(72030),g=a.i(98888);let h=(0,a.i(1269).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),i="https://dir.lascrucesdirectory.com/wp-json/geodir/v2";async function j({searchParams:a}){let b=(await a).q||"";return{title:b?`Search results for "${b}"`:"Search",description:`Find local businesses, restaurants, accommodations, and places in Las Cruces${b?` matching "${b}"`:""}.`}}async function k(a){if(!a||a.length<2)return[];let b=[{type:"restaurant",label:"Restaurant",url:`${i}/restaurant?search=${encodeURIComponent(a)}&per_page=50`},{type:"business",label:"Business",url:`${i}/business?search=${encodeURIComponent(a)}&per_page=50`},{type:"accommodation",label:"Accommodation",url:`${i}/accommodation?search=${encodeURIComponent(a)}&per_page=50`},{type:"places",label:"Place",url:`${i}/places?search=${encodeURIComponent(a)}&per_page=50`}];return(await Promise.all(b.map(async({type:a,label:b,url:c})=>{try{let d=await fetch(c,{next:{revalidate:300}});if(!d.ok)return[];return(await d.json()).map(c=>{var d;let e;return{id:c.id,slug:c.slug,title:(d=c.title?.rendered||c.title||"",e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'","&#8217;":"'","&#8216;":"'","&#8220;":'"',"&#8221;":'"',"&#038;":"&"},d.replace(/&[#a-z0-9]+;/gi,a=>e[a]||a)),type:a,typeLabel:b,city:c.city||c.location?.city,category:c.post_category?.[0]?.name?.replace(/&amp;/g,"&"),image:c.featured_image?.src?`/api/image-proxy?url=${encodeURIComponent(c.featured_image.src)}`:c.images?.[0]?.src?`/api/image-proxy?url=${encodeURIComponent(c.images[0].src)}`:void 0}})}catch{return[]}}))).flat()}let l={restaurant:"bg-orange-100 text-orange-700",business:"bg-blue-100 text-blue-700",accommodation:"bg-purple-100 text-purple-700",places:"bg-green-100 text-green-700"},m={restaurant:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg?auto=compress&cs=tinysrgb&w=400",business:"https://images.pexels.com/photos/380768/pexels-photo-380768.jpeg?auto=compress&cs=tinysrgb&w=400",accommodation:"https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg?auto=compress&cs=tinysrgb&w=400",places:"https://images.pexels.com/photos/2739664/pexels-photo-2739664.jpeg?auto=compress&cs=tinysrgb&w=400"};async function n({query:a}){let c=await k(a);if(!a)return(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)(h,{className:"w-16 h-16 text-slate-300 mx-auto mb-4","aria-hidden":"true"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Search the Directory"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Enter a search term to find local businesses, restaurants, and more."})]});if(0===c.length)return(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)(h,{className:"w-16 h-16 text-slate-300 mx-auto mb-4","aria-hidden":"true"}),(0,b.jsx)("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No results found"}),(0,b.jsx)("p",{className:"text-slate-600",children:"Try a different search term or browse our categories."}),(0,b.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mt-8",children:[(0,b.jsx)(d.default,{href:"/restaurant",className:"px-6 py-3 bg-orange-100 text-orange-700 rounded-xl font-medium hover:bg-orange-200 transition-colors",children:"Restaurants"}),(0,b.jsx)(d.default,{href:"/business",className:"px-6 py-3 bg-blue-100 text-blue-700 rounded-xl font-medium hover:bg-blue-200 transition-colors",children:"Businesses"}),(0,b.jsx)(d.default,{href:"/accommodation",className:"px-6 py-3 bg-purple-100 text-purple-700 rounded-xl font-medium hover:bg-purple-200 transition-colors",children:"Accommodations"}),(0,b.jsx)(d.default,{href:"/places",className:"px-6 py-3 bg-green-100 text-green-700 rounded-xl font-medium hover:bg-green-200 transition-colors",children:"Places"})]})]});let f=c.reduce((a,b)=>(a[b.type]||(a[b.type]=[]),a[b.type].push(b),a),{});return(0,b.jsxs)("div",{className:"space-y-12",children:[(0,b.jsxs)("p",{className:"text-slate-600",children:["Found ",(0,b.jsx)("span",{className:"font-semibold text-slate-900",children:c.length}),' results for "',a,'"']}),Object.entries(f).map(([a,c])=>(0,b.jsxs)("section",{children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-slate-900 mb-6 flex items-center gap-2",children:[(0,b.jsxs)("span",{className:`px-3 py-1 rounded-full text-sm ${l[a]}`,children:[c[0].typeLabel,"s"]}),(0,b.jsxs)("span",{className:"text-slate-400 font-normal text-base",children:["(",c.length,")"]})]}),(0,b.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(a=>(0,b.jsx)("article",{children:(0,b.jsxs)(d.default,{href:`/${a.type}/${a.slug}`,className:"group block bg-white rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:[(0,b.jsx)("div",{className:"relative h-48 overflow-hidden",children:(0,b.jsx)(e.default,{src:a.image||m[a.type],alt:a.title,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw",className:"object-cover group-hover:scale-105 transition-transform duration-300"})}),(0,b.jsxs)("div",{className:"p-4",children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-900 group-hover:text-emerald-600 transition-colors truncate",children:a.title}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-2",children:[a.city&&(0,b.jsxs)("span",{className:"text-sm text-slate-500 flex items-center gap-1",children:[(0,b.jsx)(g.MapPin,{className:"w-3 h-3","aria-hidden":"true"}),a.city]}),a.category&&(0,b.jsx)("span",{className:"text-xs px-2 py-0.5 bg-slate-100 text-slate-600 rounded-full",children:a.category})]})]})]})},`${a.type}-${a.id}`))})]},a))]})}async function o({searchParams:a}){let e=(await a).q||"";return(0,b.jsxs)("main",{children:[(0,b.jsx)("section",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 py-16",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,b.jsxs)("nav",{"aria-label":"Breadcrumb",className:"flex items-center space-x-2 text-sm text-slate-300 mb-6",children:[(0,b.jsx)(d.default,{href:"/",className:"hover:text-white transition-colors",children:"Home"}),(0,b.jsx)(f.ChevronRight,{className:"w-4 h-4","aria-hidden":"true"}),(0,b.jsx)("span",{className:"text-white",children:"Search"})]}),(0,b.jsx)("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-4",children:e?`Results for "${e}"`:"Search"}),(0,b.jsx)("p",{className:"text-xl text-slate-300",children:"Find businesses, restaurants, accommodations, and places in Las Cruces"})]})}),(0,b.jsx)("section",{className:"py-12",children:(0,b.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"text-center py-16",children:(0,b.jsxs)("div",{className:"animate-pulse",children:[(0,b.jsx)("div",{className:"h-8 w-48 bg-slate-200 rounded mx-auto mb-4"}),(0,b.jsx)("div",{className:"h-4 w-64 bg-slate-100 rounded mx-auto"})]})}),children:(0,b.jsx)(n,{query:e})})})})]})}a.s(["default",()=>o,"generateMetadata",()=>j],21120)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__39e247d9._.js.map