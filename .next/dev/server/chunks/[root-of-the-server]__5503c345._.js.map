{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///home/runner/workspace/app/api/image-proxy/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\nexport async function GET(request: NextRequest) {\n  const searchParams = request.nextUrl.searchParams;\n  const imageUrl = searchParams.get('url');\n\n  if (!imageUrl) {\n    return new NextResponse('Missing image URL', { status: 400 });\n  }\n\n  if (!imageUrl.startsWith('https://dir.lascrucesdirectory.com/')) {\n    return new NextResponse('Invalid image URL', { status: 400 });\n  }\n\n  try {\n    const response = await fetch(imageUrl, {\n      headers: {\n        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36',\n      },\n    });\n\n    if (!response.ok) {\n      return new NextResponse('Failed to fetch image', { status: response.status });\n    }\n\n    const contentType = response.headers.get('content-type') || 'image/jpeg';\n    const imageBuffer = await response.arrayBuffer();\n\n    return new NextResponse(imageBuffer, {\n      status: 200,\n      headers: {\n        'Content-Type': contentType,\n        'Cache-Control': 'public, max-age=31536000, immutable',\n      },\n    });\n  } catch (error) {\n    console.error('Image proxy error:', error);\n    return new NextResponse('Error fetching image', { status: 500 });\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,IAAI,OAAoB;IAC5C,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;IACjD,MAAM,WAAW,aAAa,GAAG,CAAC;IAElC,IAAI,CAAC,UAAU;QACb,OAAO,IAAI,gJAAY,CAAC,qBAAqB;YAAE,QAAQ;QAAI;IAC7D;IAEA,IAAI,CAAC,SAAS,UAAU,CAAC,wCAAwC;QAC/D,OAAO,IAAI,gJAAY,CAAC,qBAAqB;YAAE,QAAQ;QAAI;IAC7D;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,UAAU;YACrC,SAAS;gBACP,cAAc;YAChB;QACF;QAEA,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,OAAO,IAAI,gJAAY,CAAC,yBAAyB;gBAAE,QAAQ,SAAS,MAAM;YAAC;QAC7E;QAEA,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC,mBAAmB;QAC5D,MAAM,cAAc,MAAM,SAAS,WAAW;QAE9C,OAAO,IAAI,gJAAY,CAAC,aAAa;YACnC,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,iBAAiB;YACnB;QACF;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,sBAAsB;QACpC,OAAO,IAAI,gJAAY,CAAC,wBAAwB;YAAE,QAAQ;QAAI;IAChE;AACF"}}]
}