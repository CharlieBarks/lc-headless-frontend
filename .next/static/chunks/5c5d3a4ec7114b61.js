(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,79562,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),s=e.i(55436),o=e.i(64659);let n=(0,e.i(75254).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);function i({categories:e,type:i}){let l=(0,a.useRouter)(),c=(0,a.useSearchParams)(),[d,g]=(0,r.useState)(c.get("search")||""),[u,m]=(0,r.useState)(!1),h=c.get("category")||"";return(0,t.jsxs)("div",{className:"mb-12 space-y-6",children:[(0,t.jsxs)("div",{className:"relative max-w-2xl",children:[(0,t.jsx)(s.Search,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-slate-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",value:d,onChange:e=>{var t;let r;return g(t=e.target.value),r=new URLSearchParams(c.toString()),void(t?r.set("search",t):r.delete("search"),l.push(`/${i}?${r.toString()}`))},placeholder:"Search listings...",className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-slate-200 rounded-xl text-slate-900 placeholder-slate-400 focus:outline-none focus:border-emerald-500 focus:ring-2 focus:ring-emerald-200 transition-all"})]}),e.length>0&&(0,t.jsxs)("div",{children:[(0,t.jsxs)("button",{onClick:()=>m(!u),className:"flex items-center gap-2 text-slate-700 font-medium hover:text-emerald-600 transition-colors mb-4",children:[(0,t.jsx)("span",{children:"Filter by Category"}),u?(0,t.jsx)(n,{className:"w-5 h-5"}):(0,t.jsx)(o.ChevronDown,{className:"w-5 h-5"})]}),u&&(0,t.jsx)("div",{className:"flex flex-wrap gap-3 animate-in fade-in slide-in-from-top-2 duration-200",children:e.map(e=>(0,t.jsx)("button",{onClick:()=>{var t;let r;return t=e.id.toString(),r=new URLSearchParams(c.toString()),void(h===t.toString()?r.delete("category"):r.set("category",t.toString()),l.push(`/${i}?${r.toString()}`))},className:`px-4 py-2 rounded-lg font-medium transition-all ${h===e.id.toString()?"bg-emerald-600 text-white shadow-lg":"bg-white border-2 border-slate-200 text-slate-700 hover:border-emerald-500 hover:text-emerald-600"}`,children:e.name},e.id))})]}),(d||h)&&(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,t.jsx)("span",{className:"text-slate-600",children:"Active filters:"}),d&&(0,t.jsxs)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium",children:["Search: ",d]}),h&&(0,t.jsx)("span",{className:"px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full text-sm font-medium",children:e.find(e=>e.id.toString()===h)?.name}),(0,t.jsx)("button",{onClick:()=>{g(""),l.push(`/${i}`)},className:"text-sm text-slate-600 hover:text-emerald-600 underline",children:"Clear all"})]})]})}e.s(["ArchiveFilters",()=>i],79562)},45026,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(22016),s=e.i(57688),o=e.i(75254);let n=(0,o.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),i=(0,o.default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);function l(e){let t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'","&#8217;":"'","&#8216;":"'","&#8220;":'"',"&#8221;":'"',"&#038;":"&","&nbsp;":" ","&#160;":" ","&hellip;":"…","&#8230;":"…","&ndash;":"–","&#8211;":"–","&mdash;":"—","&#8212;":"—"};return e.replace(/&[#a-z0-9]+;/gi,e=>t[e]||e)}let c={restaurant:"https://images.pexels.com/photos/262978/pexels-photo-262978.jpeg?auto=compress&cs=tinysrgb&w=800",business:"https://images.pexels.com/photos/380768/pexels-photo-380768.jpeg?auto=compress&cs=tinysrgb&w=800",accommodation:"https://images.pexels.com/photos/271624/pexels-photo-271624.jpeg?auto=compress&cs=tinysrgb&w=800",places:"https://images.pexels.com/photos/2739664/pexels-photo-2739664.jpeg?auto=compress&cs=tinysrgb&w=800",blog:"https://images.pexels.com/photos/261763/pexels-photo-261763.jpeg?auto=compress&cs=tinysrgb&w=800"},d="https://dir.lascrucesdirectory.com/wp-json/geodir/v2",g="https://dir.lascrucesdirectory.com/wp-json/wp/v2";async function u(e,t={}){let r=new URL(e),a=r.pathname+r.search;return fetch(`/api/wp-proxy?path=${encodeURIComponent(a)}`,t)}let m={async getRestaurants(e=3,t,r){try{let a=`${d}/restaurant?per_page=${e}&_embed`;t&&(a+=`&gd_restaurantcategory=${t}`),r&&(a+=`&search=${encodeURIComponent(r)}`);let s=await u(a,{next:{revalidate:3600}});if(!s.ok)throw Error("Failed to fetch restaurants");return await s.json()}catch(e){return console.error("Error fetching restaurants:",e),[]}},async getRestaurantCategories(){try{let e=await u(`${d}/restaurant/categories?per_page=100`,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch restaurant categories");return(await e.json()).filter(e=>e.count>0)}catch(e){return console.error("Error fetching restaurant categories:",e),[]}},async getBusinesses(e=3,t,r){try{let a=`${d}/business?per_page=${e}&_embed`;t&&(a+=`&gd_businesscategory=${t}`),r&&(a+=`&search=${encodeURIComponent(r)}`);let s=await u(a,{next:{revalidate:3600}});if(!s.ok)throw Error("Failed to fetch businesses");return await s.json()}catch(e){return console.error("Error fetching businesses:",e),[]}},async getBusinessCategories(){try{let e=await u(`${d}/business/categories?per_page=100`,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch business categories");return(await e.json()).filter(e=>e.count>0)}catch(e){return console.error("Error fetching business categories:",e),[]}},async getAccommodations(e=3,t,r){try{let a=`${d}/accommodation?per_page=${e}&_embed`;t&&(a+=`&gd_accommodationcategory=${t}`),r&&(a+=`&search=${encodeURIComponent(r)}`);let s=await u(a,{next:{revalidate:3600}});if(!s.ok)throw Error("Failed to fetch accommodations");return await s.json()}catch(e){return console.error("Error fetching accommodations:",e),[]}},async getAccommodationCategories(){try{let e=await u(`${d}/accommodation/categories?per_page=100`,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch accommodation categories");return(await e.json()).filter(e=>e.count>0)}catch(e){return console.error("Error fetching accommodation categories:",e),[]}},async getPlaces(e=3,t,r){try{let a=`${d}/places?per_page=${e}&_embed`;t&&(a+=`&gd_placecategory=${t}`),r&&(a+=`&search=${encodeURIComponent(r)}`);let s=await u(a,{next:{revalidate:3600}});if(!s.ok)throw Error("Failed to fetch places");return await s.json()}catch(e){return console.error("Error fetching places:",e),[]}},async getPlaceCategories(){try{let e=await u(`${d}/places/categories?per_page=100`,{next:{revalidate:3600}});if(!e.ok)throw Error("Failed to fetch place categories");return(await e.json()).filter(e=>e.count>0)}catch(e){return console.error("Error fetching place categories:",e),[]}},async getFeaturedListings(e=3){try{let[t,r]=await Promise.all([u(`${d}/restaurant?per_page=100&_embed`,{next:{revalidate:3600}}),u(`${d}/business?per_page=100&_embed`,{next:{revalidate:3600}})]),a=await Promise.all([t.ok?t.json():[],r.ok?r.json():[]]);return[...a[0],...a[1]].filter(e=>e.featured_image&&"object"==typeof e.featured_image&&e.featured_image.src).sort(()=>Math.random()-.5).slice(0,e)}catch(e){return console.error("Error fetching featured listings:",e),[]}},async getBlogPosts(e=3){try{let t=await u(`${g}/posts?per_page=${e}&_embed`,{next:{revalidate:3600}});if(!t.ok)throw Error("Failed to fetch blog posts");return await t.json()}catch(e){return console.error("Error fetching blog posts:",e),[]}},async getCategoryCounts(){try{let[e,t,r,a]=await Promise.all([u(`${d}/restaurant?per_page=1`,{next:{revalidate:3600}}),u(`${d}/business?per_page=1`,{next:{revalidate:3600}}),u(`${d}/accommodation?per_page=1`,{next:{revalidate:3600}}),u(`${d}/places?per_page=1`,{next:{revalidate:3600}})]);return{restaurants:parseInt(e.headers.get("X-WP-Total")||"0"),businesses:parseInt(t.headers.get("X-WP-Total")||"0"),accommodations:parseInt(r.headers.get("X-WP-Total")||"0"),places:parseInt(a.headers.get("X-WP-Total")||"0")}}catch(e){return console.error("Error fetching category counts:",e),{restaurants:0,businesses:0,accommodations:0,places:0}}},async searchListings(e,t=10){try{let[r,a,s,o]=await Promise.all([u(`${d}/restaurant?search=${encodeURIComponent(e)}&per_page=${t}`,{next:{revalidate:3600}}),u(`${d}/business?search=${encodeURIComponent(e)}&per_page=${t}`,{next:{revalidate:3600}}),u(`${d}/accommodation?search=${encodeURIComponent(e)}&per_page=${t}`,{next:{revalidate:3600}}),u(`${d}/places?search=${encodeURIComponent(e)}&per_page=${t}`,{next:{revalidate:3600}})]),n=await Promise.all([r.json(),a.json(),s.json(),o.json()]);return[...n[0],...n[1],...n[2],...n[3]].slice(0,t)}catch(e){return console.error("Error searching listings:",e),[]}},async getListingBySlug(e,t){try{let r=await u(`${d}/${e}?slug=${t}&_embed`,{next:{revalidate:3600}});if(!r.ok)throw Error("Failed to fetch listing");let a=await r.json();return a.length>0?a[0]:null}catch(e){return console.error("Error fetching listing:",e),null}},async getListingById(e,t){try{let r=await u(`${d}/${e}/${t}?_embed`,{next:{revalidate:3600}});if(!r.ok)throw Error("Failed to fetch listing");return await r.json()}catch(e){return console.error("Error fetching listing:",e),null}},async getBlogPostById(e){try{let t=await u(`${g}/posts/${e}?_embed`,{next:{revalidate:3600}});if(!t.ok)throw Error("Failed to fetch blog post");return await t.json()}catch(e){return console.error("Error fetching blog post:",e),null}},async getBlogPostBySlug(e){try{let t=await u(`${g}/posts?slug=${e}&_embed`,{next:{revalidate:3600}});if(!t.ok)throw Error("Failed to fetch blog post");let r=await t.json();return r.length>0?r[0]:null}catch(e){return console.error("Error fetching blog post:",e),null}},async getPageById(e){try{let t=await u(`${g}/pages/${e}?_embed`,{next:{revalidate:3600}});if(!t.ok)throw Error("Failed to fetch page");return await t.json()}catch(e){return console.error("Error fetching page:",e),null}},async getPageBySlug(e){try{let t=await u(`${g}/pages?slug=${e}&_embed`,{next:{revalidate:3600}});if(!t.ok)throw Error("Failed to fetch page");let r=await t.json();return r.length>0?r[0]:null}catch(e){return console.error("Error fetching page:",e),null}}};function h({listings:e,type:o,config:d}){let[g,u]=(0,r.useState)(12),m=e.slice(0,g),h=g<e.length;return 0===e.length?(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"No listings found"}),(0,t.jsxs)("p",{className:"text-slate-600",children:["Check back soon for new ",d.title.toLowerCase(),"!"]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:m.map(e=>{let r,d=function(e,t="business"){return e.featured_image&&"object"==typeof e.featured_image&&e.featured_image.src?e.featured_image.src:Array.isArray(e.images)&&e.images.length>0&&e.images[0]?.src?e.images[0].src:e._embedded?.["wp:featuredmedia"]?.[0]?.source_url?e._embedded["wp:featuredmedia"][0].source_url:e._embedded?.["wp:featuredmedia"]?.[0]?.media_details?.sizes?.medium?.source_url?e._embedded["wp:featuredmedia"][0].media_details.sizes.medium.source_url:c[t]}(e,o);return(0,t.jsx)("article",{children:(0,t.jsxs)(a.default,{href:`/${o}/${e.slug}`,"aria-label":`View ${l(e.title.rendered)}`,className:"group block bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:[(0,t.jsxs)("div",{className:"relative h-56 overflow-hidden",children:[(0,t.jsx)(s.default,{src:d,alt:l(e.title.rendered),fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1024px) 50vw, 33vw",className:"object-cover group-hover:scale-110 transition-transform duration-500"}),(0,t.jsxs)("div",{className:"absolute top-4 left-4 flex gap-2",children:[("boolean"==typeof(r=e.claimed)?r:"object"==typeof r&&r?.raw?"1"===r.raw||"true"===r.raw:"string"==typeof r?"1"===r:"number"==typeof r&&1===r)&&(0,t.jsxs)("div",{className:"px-3 py-1 bg-blue-500/90 backdrop-blur-sm rounded-full text-sm font-semibold text-white flex items-center gap-1.5 shadow-lg",children:[(0,t.jsx)(n,{className:"w-4 h-4","aria-hidden":"true"}),"Claimed"]}),!0===e.featured&&(0,t.jsxs)("div",{className:"px-3 py-1 bg-amber-500/90 backdrop-blur-sm rounded-full text-sm font-semibold text-white flex items-center gap-1.5 shadow-lg",children:[(0,t.jsx)(i,{className:"w-4 h-4 fill-white","aria-hidden":"true"}),"Featured"]})]}),e.rating&&e.rating>0&&(0,t.jsxs)("div",{className:"absolute top-4 right-4 px-3 py-1 bg-white/90 backdrop-blur-sm rounded-full text-sm font-bold text-slate-900",children:["⭐ ",e.rating.toFixed(1)]})]}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-slate-900 mb-2 group-hover:text-emerald-600 transition-colors",children:l(e.title.rendered)}),e.city&&(0,t.jsxs)("p",{className:"text-slate-600 text-sm mb-2",children:[e.city,", ",e.region]}),e.post_category&&e.post_category.length>0&&(0,t.jsx)("span",{className:"inline-block px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-xs font-semibold",children:e.post_category[0].name.replace(/&amp;/g,"&")})]})]})},e.id)})}),h&&(0,t.jsx)("div",{className:"mt-12 text-center",children:(0,t.jsxs)("button",{onClick:()=>{u(t=>Math.min(t+12,e.length))},className:"px-8 py-4 bg-emerald-600 text-white font-semibold rounded-xl hover:bg-emerald-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:-translate-y-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-emerald-500 focus-visible:ring-offset-2",children:["Show More (",e.length-g," remaining)"]})})]})}(0,r.cache)(async(e,t)=>m.getListingBySlug(e,t)),(0,r.cache)(async e=>m.getBlogPostBySlug(e)),(0,r.cache)(async()=>{let e=async(e,t=5e3)=>Promise.race([e,new Promise(e=>setTimeout(()=>e(null),t))]),[t,r,a]=await Promise.all([e(m.getFeaturedListings(3)).then(e=>e||[]),e(m.getBlogPosts(3)).then(e=>e||[]),e(m.getCategoryCounts()).then(e=>e||{restaurants:0,businesses:0,accommodations:0,places:0})]);return{featuredListings:t,blogPosts:r,categoryCounts:a}}),(0,r.cache)(async(e,t,r)=>{let a=[],s=[];try{switch(e){case"restaurant":[a,s]=await Promise.all([m.getRestaurants(100,t,r),m.getRestaurantCategories()]);break;case"business":[a,s]=await Promise.all([m.getBusinesses(100,t,r),m.getBusinessCategories()]);break;case"accommodation":[a,s]=await Promise.all([m.getAccommodations(100,t,r),m.getAccommodationCategories()]);break;case"places":[a,s]=await Promise.all([m.getPlaces(100,t,r),m.getPlaceCategories()])}}catch(t){console.error(`Error fetching ${e}:`,t)}return{listings:a,categories:s}}),(0,r.cache)(async(e=50)=>m.getBlogPosts(e)),e.s(["ListingsGrid",()=>h],45026)}]);